<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>StarRoot - Network Topology</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="/css/index.css" rel="stylesheet">

    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

    <style>
        /* í† í´ë¡œì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .topology-wrapper {
            position: relative;
            height: 50vh; /* í™”ë©´ ë†’ì´ì˜ 80% */
            margin-top: -20px; /* í—¤ë”ì™€ ìì—°ìŠ¤ëŸ½ê²Œ ì—°ê²° */
            background: rgba(15, 23, 42, 0.4);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        /* ë„¤íŠ¸ì›Œí¬ ë§µì´ ê·¸ë ¤ì§ˆ ì˜ì—­ */
        #mynetwork {
            width: 100%;
            height: 100%;
            /* ëª¨ëˆˆì¢…ì´ ê°™ì€ ê²©ì ë°°ê²½ íš¨ê³¼ */
            background-image:
                linear-gradient(rgba(6, 182, 212, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(6, 182, 212, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        /* ìš°ì¸¡ ìƒë‹¨ ì •ë³´ íŒ¨ë„ */
        .info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 250px;
            padding: 15px;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid var(--accent-cyan);
            border-radius: 8px;
            color: #fff;
            z-index: 10;
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
            display: none; /* í´ë¦­ ì‹œ ë“±ì¥ */
        }

        /* ëª¨ë°”ì¼(í™”ë©´ í­ 768px ì´í•˜)ì¼ ë•Œ íŒ¨ë„ ê·œê²© ë³€ê²½ */
        @media (max-width: 768px) {
            .info-panel {
                top: auto;          /* ìœ„ìª½ ìœ„ì¹˜ í•´ì œ */
                bottom: 20px;       /* ì•„ë˜ìª½ì— ë¶™ì„ */
                left: 20px;         /* ì™¼ìª½ ì—¬ë°± */
                right: 20px;        /* ì˜¤ë¥¸ìª½ ì—¬ë°± */
                width: auto;        /* ë„ˆë¹„ ìë™ (ê½‰ ì°¨ê²Œ) */
                z-index: 1000;
            }
        }
    </style>
</head>
<body class="dashboard-body">

<div th:replace="~{fragments/header :: header}"></div>

<!-- 1. í˜ì´ì§€ íˆì–´ë¡œ -->
<section class="page-hero" style="background-image: linear-gradient(to bottom, rgba(15, 23, 42, 0.9), var(--primary-bg)), url('/images/solutions/solutions_Network_Topology.png');">
    <div class="container position-relative z-1">
        <h1 class="page-title">Network Topology</h1>
        <p class="page-subtitle">
            ì¥ë¹„ë“¤ì´ ì„œë¡œ ì–´ë–»ê²Œ ì—°ê²°ë˜ì–´ ìˆëŠ”ì§€ ì„ ìœ¼ë¡œ ì´ì–´ ë³´ì—¬ì£¼ëŠ”<br>
            ì‹¤ì‹œê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ ë° íŠ¸ë˜í”½ íë¦„ ì‹œê°í™” ì§€ë„ì…ë‹ˆë‹¤
        </p>
    </div>
</section>

<section class="py-5">
    <div class="container py-4">
        <div class="row g-4">

            <div class="col-md-4">
                <div class="glass-box feature-box text-center">
                    <i class="bi bi-diagram-3 feature-icon"></i>
                    <h4 class="text-white fw-bold mb-3">Intuitive Visibility</h4>
                    <p class="text-white-50">
                        ë³µì¡í•˜ê²Œ ì–½íŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²° êµ¬ì¡°ë¥¼ í•œëˆˆì— íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ ì‹œê°í™”í•©ë‹ˆë‹¤.
                        ì¥ë¹„ ê°„ì˜ ë¬¼ë¦¬ì /ë…¼ë¦¬ì  ì—°ê²° íë¦„ì„ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•˜ì—¬ ê´€ë¦¬ íš¨ìœ¨ì„ ë†’ì…ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="glass-box feature-box text-center">
                    <i class="bi bi-activity feature-icon"></i>
                    <h4 class="text-white fw-bold mb-3">Live Status Check</h4>
                    <p class="text-white-50">
                        ëª¨ë“  ë…¸ë“œ(ì¥ë¹„)ì˜ í†µì‹  ìƒíƒœë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
                        Ping ì²´í¬ë¥¼ í†µí•´ ë‹¤ìš´ëœ ì¥ë¹„ë¥¼ ì¦‰ì‹œ ìƒ‰ìƒ(Red)ìœ¼ë¡œ í‘œì‹œí•˜ì—¬ ì¥ì•  ëŒ€ì‘ ê³¨ë“ íƒ€ì„ì„ í™•ë³´í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

            <div class="col-md-4">
                <div class="glass-box feature-box text-center">
                    <i class="bi bi-bezier2 feature-icon"></i>
                    <h4 class="text-white fw-bold mb-3">Impact Analysis</h4>
                    <p class="text-white-50">
                        ìƒìœ„ ìŠ¤ìœ„ì¹˜ ì¥ì•  ë°œìƒ ì‹œ, ì—°ê²° ëŠê¹€ì´ ì˜ˆìƒë˜ëŠ” í•˜ìœ„ ì„œë²„ë“¤ì„ ì¦‰ê° ì‹ë³„í•©ë‹ˆë‹¤.
                        ì—°ê²° ì¢…ì†ì„±(Dependency)ì„ ë¶„ì„í•˜ì—¬ ì¥ì•  í™•ì‚° ë²”ìœ„ë¥¼ ì‚¬ì „ì— ì˜ˆì¸¡í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </div>

        </div>
    </div>
</section>

<section class="py-5 mb-5">
    <div class="container">
        <div class="stat-card">
            <div class="row align-items-center">
                <!-- 1. ì„¤ëª… í…ìŠ¤íŠ¸ëŠ” ìƒë‹¨ì— ë°€ì°© -->
                <div class="col-lg-6">
                    <h3 class="section-header text-cyan mb-3">LOOK IN ONE SYSTEM</h3>
                    <h5 class="text-white fw-bold mb-4">í•œ ëˆˆì— ë³´ëŠ” ì„œë²„!<br>ì „ì²´ ìš”ì•½ì„ í™•ì¸í•˜ì„¸ìš”.</h5>
                    <ul class="list-unstyled text-white-50">
                        <li class="mb-3"><i class="bi bi-check-circle-fill text-success me-2"></i> ë™ê·¸ë€ ë…¸ë“œ(ì¥ë¹„)ë“¤ì„ ë“œë˜ê·¸í•´ì„œ ì›€ì§ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li class="mb-3"><i class="bi bi-check-circle-fill text-success me-2"></i> ì—°ê²°ëœ ì„ (Cable)ì„ í´ë¦­í•˜ë©´ í¬íŠ¸ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.</li>
                        <li class="mb-3"><i class="bi bi-check-circle-fill text-success me-2"></i> ìŠ¤ìœ„ì¹˜ê°€ ë‹¤ìš´ë˜ë©´ ì—°ê²°ëœ ì„œë²„ë“¤ì´ ì „ë¶€ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€í•˜ëŠ” ì—°ì‡„ íš¨ê³¼ë¥¼ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    </ul>
                </div>

               <!-- 2. ë¼ì´ë¸Œ í† í´ë¡œì§€ ë§µ -->
                <div class="col-lg-6 mt-4 mt-lg-0">
                    <div class="glass-box p-4" style="border: 1px solid rgba(6,182,212,0.3); background: rgba(15, 23, 42, 0.6);">
                        <div class="d-flex justify-content-between align-items-center mb-5">
                            <h6 class="text-white fw-bold mb-0"><i class="bi bi-grid-3x3-gap text-danger me-2"></i>Live Topology Map</h6>
                            <span class="text-white-50 small">192.168.0.1</span>
                        </div>

                        <!-- í† í´ë¡œì§€ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ -->
                        <div class="topology-wrapper">
                            <div id="mynetwork"></div>

                            <div id="node-info" class="info-panel">
                                <h5 id="panel-title" class="fw-bold text-info mb-3">Device Info</h5>
                                <p class="small text-white-50 mb-1">Status:</p>
                                <p id="panel-status" class="fw-bold text-success mb-3">Online</p>
                                <p class="small text-white-50 mb-1">IP Address:</p>
                                <p id="panel-ip" class="mb-3">192.168.0.1</p>
                                <button class="btn btn-sm btn-outline-info w-100"
                                        data-dummy-download>ìƒì„¸ ì •ë³´ ë³´ê¸°</button>
                            </div>
                        </div>

                        <!-- ë²”ë¡€ -->
                        <div class="mt-3 d-flex justify-content-center gap-3 small text-white-50">
                            <span class="d-flex align-items-center"><i class="bi bi-diamond-fill me-1" style="color: #f472b6;"></i> Internet</span>
                            <span class="d-flex align-items-center"><i class="bi bi-hexagon-fill me-2" style="color: #22d3ee;"></i> Switch</span>
                            <span class="d-flex align-items-center"><i class="bi bi-square-fill me-2" style="color: #f87171;"></i> Firewall</span>
                            <span class="d-flex align-items-center"><i class="bi bi-circle-fill me-2" style="color: #4ade80;"></i> Server</span>
                            <span class="d-flex align-items-center"><i class="bi bi-database-fill me-2" style="color: #fbbf24;"></i> Database</span>
                            <span class="d-flex align-items-center"><i class="bi bi-hdd-fill me-2" style="color: #a78bfa;"></i> Storage</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- í† ìŠ¤íŠ¸ ë©”ì‹œì§€ -->
<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 1100">
    <div id="notImplementedToast"
         class="toast text-bg-dark border-0"
         role="alert"
         aria-live="assertive"
         aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                ğŸš§ í˜„ì¬ ë¯¸êµ¬í˜„ ê¸°ëŠ¥ì…ë‹ˆë‹¤.
            </div>
            <button type="button"
                    class="btn-close btn-close-white me-2 m-auto"
                    data-bs-dismiss="toast"
                    aria-label="Close">
            </button>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: footer}"></div>

<script>
    // 1. ë…¸ë“œ ë°ì´í„° (ì¥ë¹„ë“¤)
    // id: ê³ ìœ ë²ˆí˜¸, label: ì´ë¦„, group: ì¥ë¹„ì¢…ë¥˜(ì•„ì´ì½˜ ê²°ì •)
    var nodes = new vis.DataSet([
        { id: 1, label: 'Internet', group: 'internet', value: 30 },
        { id: 2, label: 'Core Switch\n(L3)', group: 'switch', value: 25 },
        { id: 3, label: 'Firewall', group: 'firewall', value: 20 },
        { id: 4, label: 'Edge SW 01', group: 'switch', value: 15 },
        { id: 5, label: 'Edge SW 02', group: 'switch', value: 15 },
        { id: 6, label: 'Web Server 1', group: 'server', status: 'normal' },
        { id: 7, label: 'Web Server 2', group: 'server', status: 'normal' },
        { id: 8, label: 'DB Server', group: 'database', status: 'warning' }, // ì£¼ì˜ ìƒíƒœ
        { id: 9, label: 'Storage NAS', group: 'storage', status: 'normal' }
    ]);

    // 2. ì—£ì§€ ë°ì´í„° (ì—°ê²° ì„ )
    var edges = new vis.DataSet([
        { from: 1, to: 3, length: 150 }, // ì¸í„°ë„· -> ë°©í™”ë²½
        { from: 3, to: 2, length: 150 }, // ë°©í™”ë²½ -> ì½”ì–´ ìŠ¤ìœ„ì¹˜
        { from: 2, to: 4, length: 200 }, // ì½”ì–´ -> ì—£ì§€1
        { from: 2, to: 5, length: 200 }, // ì½”ì–´ -> ì—£ì§€2
        { from: 4, to: 6 }, // ì—£ì§€1 -> ì›¹ì„œë²„1
        { from: 4, to: 7 }, // ì—£ì§€1 -> ì›¹ì„œë²„2
        { from: 5, to: 8, color: { color: '#fbbf24' } }, // ì—£ì§€2 -> DB (ì£¼ì˜ ìƒ‰ìƒ)
        { from: 5, to: 9 }  // ì—£ì§€2 -> ìŠ¤í† ë¦¬ì§€
    ]);

    // 3. ì•„ì´ì½˜ ë° ìŠ¤íƒ€ì¼ ì„¤ì •
    var container = document.getElementById('mynetwork');
    var data = { nodes: nodes, edges: edges };
    var options = {
        nodes: {
            shape: 'dot',
        size: 30,  // ê¸°ì¡´ 20 -> 30 (í´ë¦­í•˜ê¸° í¸í•˜ê²Œ í™•ëŒ€)
        font: {
            color: '#ffffff',
            size: 16, // ê¸€ì”¨ í¬ê¸° ì¶”ê°€ (ê¸°ë³¸ê°’ë³´ë‹¤ í¬ê²Œ)
            face: 'Noto Sans KR'
        },
            borderWidth: 2,
            shadow: true
        },
        edges: {
            width: 2,
            color: { color: '#06b6d4', highlight: '#a855f7' }, // ê¸°ë³¸ ì‹œì•ˆ, ì„ íƒ ì‹œ í¼í”Œ
            smooth: { type: 'continuous' } // ë¶€ë“œëŸ¬ìš´ ê³¡ì„ 
        },
        groups: {
            internet: { color: { background: '#f472b6', border: '#db2777' }, shape: 'diamond' },
            switch:   { color: { background: '#22d3ee', border: '#0891b2' }, shape: 'hexagon' },
            firewall: { color: { background: '#f87171', border: '#dc2626' }, shape: 'box' },
            server:   { color: { background: '#4ade80', border: '#16a34a' } },
            database: { color: { background: '#fbbf24', border: '#d97706' } },
            storage:  { color: { background: '#a78bfa', border: '#7c3aed' }, shape: 'square' }
        },
        physics: {
            stabilization: false,
            barnesHut: { gravitationalConstant: -3000, springConstant: 0.04 } // ë¬¼ë¦¬ íš¨ê³¼
        },
        interaction: { hover: true, tooltipDelay: 200 }
    };

    // 4. ë„¤íŠ¸ì›Œí¬ ë§µ ìƒì„±
    var network = new vis.Network(container, data, options);

    // 5. í´ë¦­ ì´ë²¤íŠ¸ (ì •ë³´ íŒ¨ë„ í‘œì‹œ)
    network.on("click", function (params) {
        var panel = document.getElementById('node-info');
        if (params.nodes.length > 0) {
            var nodeId = params.nodes[0];
            var node = nodes.get(nodeId);

            // ì •ë³´ íŒ¨ë„ ë‚´ìš© ì—…ë°ì´íŠ¸
            document.getElementById('panel-title').innerText = node.label.replace('\n', ' ');
            document.getElementById('panel-status').innerText = node.status === 'warning' ? 'Warning' : 'Normal';
            document.getElementById('panel-status').className = node.status === 'warning' ? 'fw-bold text-warning mb-3' : 'fw-bold text-success mb-3';

            panel.style.display = 'block';
        } else {
            panel.style.display = 'none';
        }
    });

    document.addEventListener("DOMContentLoaded", function () {
    const toastEl = document.getElementById("notImplementedToast");
    const toast = new bootstrap.Toast(toastEl, {
        delay: 2500
    });

        document.querySelectorAll("[data-dummy-download]").forEach(button => {
            button.addEventListener("click", function (e) {
                e.preventDefault();
                toast.show();
            });
        });
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>