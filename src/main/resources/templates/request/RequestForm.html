<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì…ê³  ì‹ ì²­</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>

<div class="container mt-5" style="max-width: 800px;"> <div class="card shadow border-0">
    <div class="card-header bg-primary text-white p-3">
        <h4 class="mb-0">ğŸ“ ì¥ë¹„ ì…ê³  ì‹ ì²­ì„œ</h4>
    </div>
    <div class="card-body p-4">
        <form action="/requests/new" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

            <h5 class="mb-3 text-primary border-bottom pb-2">1. ì‹ ì²­ì ì •ë³´</h5>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label fw-bold">íšŒì‚¬ëª…</label>
                    <input type="text" name="companyName" class="form-control"
                           th:value="${member != null ? member.companyName : ''}"
                           placeholder="ì˜ˆ: (ì£¼)KHì •ë³´í†µì‹ " required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">íšŒì‚¬ ëŒ€í‘œ ë²ˆí˜¸</label>
                    <input type="text" name="companyPhone" class="form-control"
                           th:value="${member != null ? member.companyPhone : ''}"
                           placeholder="ì˜ˆ: 02-1234-5678">
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <label class="form-label fw-bold">ë‹´ë‹¹ì ì„±í•¨</label>
                    <input type="text" name="userName" class="form-control"
                           th:value="${member != null ? member.name : ''}" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold">ë‹´ë‹¹ì ì§í†µ ë²ˆí˜¸</label>
                    <input type="text" name="contact" class="form-control"
                           th:value="${member != null ? member.contact : ''}"
                           placeholder="ì˜ˆ: 010-0000-0000" required>
                </div>
            </div>

            <h5 class="mb-3 text-primary border-bottom pb-2">2. ì¥ë¹„ ì •ë³´</h5>

            <div class="mb-3">
                <label class="form-label">ì¥ë¹„ ì¢…ë¥˜</label>
                <select name="cateId" class="form-select" required>
                    <option value="" disabled selected>--- ì„ íƒí•´ ì£¼ì„¸ìš” ---</option>
                    <option th:each="category : ${categories}"
                            th:value="${category.id}"
                            th:text="${category.name}"></option>
                </select>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label class="form-label">ì œì¡°ì‚¬</label>
                    <input type="text" name="vendor" class="form-control" placeholder="ì˜ˆ: Dell" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">ëª¨ë¸ëª…</label>
                    <input type="text" name="modelName" class="form-control" placeholder="ì˜ˆ: R740" required>
                </div>
            </div>

            <!-- â­ [ì¶”ê°€] ì „ë ¥ ë° EMS ì…ë ¥ -->
            <div class="row mb-3 bg-light p-2 mx-1 border rounded">
                <div class="col-md-6">
                    <label class="form-label fw-bold text-danger"><i class="bi bi-lightning-charge-fill"></i> ì˜ˆìƒ ì†Œë¹„ ì „ë ¥ (W)</label>
                    <input type="number" name="powerWatt" class="form-control" placeholder="ì˜ˆ: 500" min="0" required>
                    <div class="form-text">ì¥ë¹„ ìŠ¤í™ìƒì˜ ì •ê²© ì „ë ¥ì„ ì…ë ¥í•˜ì„¸ìš”.</div>
                </div>
                <div class="col-md-6">
                    <label class="form-label fw-bold text-success"><i class="bi bi-activity"></i> EMS ê´€ì œ ì„œë¹„ìŠ¤</label>
                    <select name="emsStatus" class="form-select">
                        <option value="OFF">ì‹ ì²­ ì•ˆ í•¨</option>
                        <option value="ON">ì‹ ì²­ í•¨ (ì „ë ¥ ëª¨ë‹ˆí„°ë§)</option>
                    </select>
                    <div class="form-text">ì‹¤ì‹œê°„ ì „ë ¥ ëª¨ë‹ˆí„°ë§ ì„œë¹„ìŠ¤ ì‹ ì²­ ì—¬ë¶€</div>
                </div>
            </div>

            <div class="mb-4">
                <label class="form-label d-block">ì¥ë¹„ ë†’ì´ (Unit)</label>
                <input type="hidden" id="realHeightUnit" name="heightUnit" value="2">

                <div class="btn-group w-100 mb-2" role="group">
                    <input type="radio" class="btn-check" name="u_option" id="u1" value="1" onclick="selectUnit(1)">
                    <label class="btn btn-outline-primary" for="u1">1 U</label>

                    <input type="radio" class="btn-check" name="u_option" id="u2" value="2" onclick="selectUnit(2)" checked>
                    <label class="btn btn-outline-primary" for="u2">2 U (í‘œì¤€)</label>

                    <input type="radio" class="btn-check" name="u_option" id="u4" value="4" onclick="selectUnit(4)">
                    <label class="btn btn-outline-primary" for="u4">4 U</label>

                    <input type="radio" class="btn-check" name="u_option" id="u_etc" value="etc" onclick="enableEtc()">
                    <label class="btn btn-outline-secondary" for="u_etc">ê¸°íƒ€</label>
                </div>
                <div class="input-group">
                    <span class="input-group-text">ì§ì ‘ ì…ë ¥</span>
                    <input type="number" id="etcInput" class="form-control" min="1" disabled oninput="updateEtcValue()">
                    <span class="input-group-text">U</span>
                </div>
            </div>

            <h5 class="mb-3 text-primary border-bottom pb-2">3. ì…ê³  ê³„ì•½ ì •ë³´</h5>

            <div class="mb-3">
                <label class="form-label">ì…ê³  ëª©ì </label>
                <textarea name="purpose" class="form-control" rows="2" placeholder="ì˜ˆ: ì‚¬ë‚´ ê·¸ë£¹ì›¨ì–´ ìš´ì˜ìš©" required></textarea>
            </div>

            <div class="row mb-4">
                <div class="col-md-6">
                    <label class="form-label">ì…ê³  í¬ë§ì¼</label>
                    <input type="date" id="startDate" name="startDate" class="form-control" required>
                </div>
                <div class="col-md-6">
                    <label class="form-label">ê³„ì•½ ê¸°ê°„</label>
                    <select name="termMonth" class="form-select" required>
                        <option value="12">1ë…„ (12ê°œì›”)</option>
                        <option value="24" selected>2ë…„ (24ê°œì›”) - í‘œì¤€</option>
                        <option value="36">3ë…„ (36ê°œì›”)</option>
                        <option value="0">ê¸°íƒ€</option>
                    </select>
                </div>
            </div>

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary btn-lg">ì‹ ì²­ì„œ ì œì¶œ</button>
                <a href="/" class="btn btn-secondary">ì·¨ì†Œ</a>
            </div>
        </form>
    </div>
</div>
</div>

<script>
    // 1. ìœ ë‹› ì„ íƒ ë¡œì§
    function selectUnit(val) {
        document.getElementById('realHeightUnit').value = val;
        document.getElementById('etcInput').value = '';
        document.getElementById('etcInput').disabled = true;
    }
    function enableEtc() {
        document.getElementById('etcInput').disabled = false;
        document.getElementById('etcInput').focus();
        document.getElementById('realHeightUnit').value = '';
    }
    function updateEtcValue() {
        document.getElementById('realHeightUnit').value = document.getElementById('etcInput').value;
    }

    // 2. [ì¶”ê°€] ì˜¤ëŠ˜ ë‚ ì§œ ì´ì „ì€ ì„ íƒ ëª»í•˜ê²Œ ë§‰ê¸° (UX í–¥ìƒ)
    window.onload = function() {
        const today = new Date().toISOString().split('T')[0];
        document.getElementById("startDate").setAttribute('min', today);
    }
</script>

</body>
</html>