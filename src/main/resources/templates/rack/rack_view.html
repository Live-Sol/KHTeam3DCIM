<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ë™ ì‹¤ì¥ë„</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .rack-table { text-align: center; vertical-align: middle; }
        .unit-col { width: 60px; background-color: #f8f9fa; font-weight: bold; border-right: 2px solid #333; }

        /* ì¥ë¹„ ì¢…ë¥˜ë³„ ìƒ‰ìƒ (DeviceServiceì—ì„œ ì„¤ì •í•œ typeì— ë”°ë¼ ì ìš©ë¨) */
        .device-svr { background-color: #d1e7dd; color: #0f5132; border-left: 5px solid #198754; } /* ì„œë²„: ì´ˆë¡ */
        .device-net { background-color: #cfe2ff; color: #084298; border-left: 5px solid #0d6efd; } /* ë„¤íŠ¸ì›Œí¬: íŒŒë‘ */
        .device-sto { background-color: #e2e3e5; color: #41464b; border-left: 5px solid #6c757d; } /* ìŠ¤í† ë¦¬ì§€: íšŒìƒ‰ */
        .device-ups { background-color: #fff3cd; color: #664d03; border-left: 5px solid #ffc107; } /* UPS: ë…¸ë‘ */
        .device-etc { background-color: #f8d7da; color: #842029; border-left: 5px solid #dc3545; } /* ê¸°íƒ€: ë¹¨ê°• */

        .device-empty { color: #ccc; font-size: 0.8em; background-color: #fff; } /* ë¹ˆì¹¸ */
    </style>
</head>
<body>

<div class="container mt-5 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>
            ğŸ¢ ë™ ì‹¤ì¥ë„ : <span class="text-primary">[[${rack.rackName}]]</span>
            <br>
            <small class="text-muted fs-6">ğŸ“ [[${rack.locationDesc}]]</small>
        </h2>
        <div>
            <a href="/devices" class="btn btn-outline-primary">ğŸ“‹ ì¥ë¹„ ëª©ë¡</a>
            <a href="/racks" class="btn btn-secondary">ğŸ”™ ë™ ëª©ë¡</a>
        </div>
    </div>

    <div class="card shadow" style="max-width: 800px; margin: 0 auto;">
        <div class="card-header bg-dark text-white text-center">
            <strong>TOP (42U)</strong>
        </div>
        <div class="card-body p-0">
            <table class="table table-bordered rack-table mb-0">
                <tbody>
                <!-- 42ë²ˆë¶€í„° 1ë²ˆê¹Œì§€ ë°˜ë³µ -->
                <tr th:each="slot : ${rackView}">

                    <!-- 1. ì™¼ìª½ ìœ ë‹› ë²ˆí˜¸ -->
                    <td class="unit-col">[[${slot.unitNum}]]U</td>

                    <!-- 2. ì¥ë¹„ê°€ ìˆëŠ” ê²½ìš° (FULL) -->
                    <td th:if="${slot.status == 'FULL'}"
                        th:rowspan="${slot.rowSpan}"
                        th:classappend="|device-${#strings.toLowerCase(slot.type)}|">

                        <div class="fw-bold">[[${slot.deviceName}]]</div>
                        <span class="badge bg-dark">[[${slot.rowSpan}]] U</span>
                    </td>

                    <!-- 3. ë¹ˆ ì¹¸ì¸ ê²½ìš° (EMPTY) -->
                    <td th:if="${slot.status == 'EMPTY'}" class="device-empty">
                        Empty Slot
                    </td>

                    <!-- 4. í•©ì³ì§„ ì¹¸ (SKIP)ì€ ì•„ì˜ˆ ë Œë”ë§ ì•ˆ í•¨! -->
                </tr>
                </tbody>
            </table>
        </div>
        <div class="card-footer bg-dark text-white text-center">
            <strong>BOTTOM (1U)</strong>
        </div>
    </div>
</div>

</body>
</html>